<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Tajemství souboru app_offline.htm - snadný upgrade aplikací v ASP.NET 2.0 | ALTAIR.blog</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Language" content="cs-CZ" />
    <meta name="Description" content="Jak snadno aktualizovat ASP.NET aplikaci, včetně výměny SQL Express databází? Použijte jednoduchý trik se souborem app_offline.htm" />
    <link rel="stylesheet" type="text/css" href="/content/styles.min.css?sha=31F03253F70DEF0FB17FA30FFC606D2585C99CB1" />
    <link rel="stylesheet" type="text/css" href="/content/fa-5.1.0/css/all.css" />
    <link rel="alternate" type="application/rss+xml" href="/feed.rss" title="RSS Feed" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@ridercz" />
    <meta name="twitter:title" content="Tajemství souboru app_offline.htm - snadný upgrade aplikací v ASP.NET 2.0" />
    <meta name="twitter:description" content="Jak snadno aktualizovat ASP.NET aplikaci, včetně výměny SQL Express databází? Použijte jednoduchý trik se souborem app_offline.htm" />
    <meta name="twitter:image" content="https://www.altair.blog" />
    <meta property="og:type" content="article" />
    <meta property="og:site_name" content="ALTAIR.blog" />
    <meta property="og:title" content="Tajemství souboru app_offline.htm - snadný upgrade aplikací v ASP.NET 2.0" />
    <meta property="og:description" content="Jak snadno aktualizovat ASP.NET aplikaci, včetně výměny SQL Express databází? Použijte jednoduchý trik se souborem app_offline.htm" />
    <meta property="og:image" content="https://www.altair.blog" />
    <meta property="og:image:height" content="" />
    <meta property="og:image:width" content="" />
    <meta property="og:locale" content="cs_CZ" />
  </head>
  <body>
    <header>
      <div>
        <a href="/">
          <img src="/content/images/logo_onblack.svg" alt="altair.blog" style="height:100px;" />
        </a>
      </div>
    </header>
    <nav>
      <ul>
        <li>
          <a href="https://www.rider.cz/" title="Autor: Michal Altair Valášek">
            <i class="fal fa-user"> </i>
          </a>
        </li>
        <li>
          <a href="/archive" title="Archiv článků">
            <i class="fal fa-archive"> </i>
          </a>
        </li>
        <li>
          <a href="/categories" title="Rubriky">
            <i class="fal fa-tags"> </i>
          </a>
        </li>
        <li>
          <a href="/serials" title="Seriály">
            <i class="fal fa-list-alt"> </i>
          </a>
        </li>
        <li>
          <a href="https://www.rider.cz/#contact" title="Kontakt">
            <i class="fal fa-envelope"> </i>
          </a>
        </li>
        <li>
          <a href="https://facebook.com/rider.cz" title="Facebook">
            <i class="fab fa-facebook"> </i>
          </a>
        </li>
        <li>
          <a href="https://twitter.com/ridercz" title="Twitter">
            <i class="fab fa-twitter"> </i>
          </a>
        </li>
        <li>
          <a href="https://github.com/ridercz" title="Github">
            <i class="fab fa-github"> </i>
          </a>
        </li>
        <li>
          <a href="https://ask.fm/ridercz" title="Ask.fm">
            <i class="fal fa-question"> </i>
          </a>
        </li>
      </ul>
    </nav>
    <main>
      <h1>Tajemství souboru app_offline.htm - snadný upgrade aplikací v ASP.NET 2.0</h1>
      <aside class="article-info">
        <ul class="categories">
          <li>
            <a href="/categories/programovani" title="Rubrika">
              <i class="fal fa-tag"> </i>Programování</a>
          </li>
        </ul>
        <div>
          <a href="https://www.rider.cz/">Michal Altair Valášek </a>
          <i class="fal fa-user">​</i>
        </div>
        <div>
          <time datetime="2006-02-23T00:46:27.777+01:00" title="Datum vydání">23. února 2006 <i class="fal fa-calendar-alt">​</i></time>
        </div>
      </aside>
      <section class="article-text">
        <p>Často je potřeba aktualizovat běžící aplikaci. Pokud vám na ni chodí pět lidí za den, není to velký problém, prostě se stará data přepíší novými. Pokud je ale aplikace navštěvovanější, začínají problémy. Soubory jsou zamčené a není možné je přepsat, u větších updatů může dojít ke zmatení aplikace, o uživateli nemluvě a podobně.</p>
<p>Dobrodružné povahy použivající v ostrém provozu <em>user instance</em> SQL Serveru 2005 Express navíc musejí řešit problém s výměnou datových souborů MDF/LDF, k nimž je nemožno se za běhu dostat atd.</p>
<p>Řešení spočívá v souboru <code>app_offline.htm</code>. Pokud v rootu své webové aplikace vytvoříte soubor s tímto názvem, celá .NET aplikace se zastaví. Zruší se její aplikační doména (AppDomain) a v důsledku toho se též odpojí všechny připojené databázové soubory a zruší user instance.</p>
<p>Všechny požadavky na danou aplikaci směřované pak budou zodpovězeny zasláním obsahu tohoto souboru - měli byste do něj tudíž umístit nějakou vysvětlující zprávu v duchu, že právě probíhá aktualizace.</p>
<p>Pokud tento soubor smažete (nebo přejmenujete), při prvním dalším požadavku se aplikace normálně nastartuje.</p>
<p>Tuto funkcionalitu využívá interně i VS 2005 / VWD ve své funkci &quot;copy project&quot; potažmo &quot;publish web site&quot;.</p>
<p>Až někdy přijdete na ASPNET.CZ a uvidíte <a href="/_app_offline.htm">tento text</a>, tak vězte, že je způsoben právě tím, že jsem při aktualizaci takto aplikaci dočasně zakázal.</p>

      </section>
    </main>
    <footer>
      <ul class="logos">
        <li>
          <img src="/content/images/logo_onwhite.svg" alt="altair.blog" style="height:38px;" />
        </li>
      </ul>
      <ul class="text">
        <li>
          Copyright © <a href="https://www.rider.cz/">Michal Altair Valášek</a>, 2003-2018</li>
        <li>
          Powered by <a href="https://www.xml4web.com/">XML4web</a> on <a href="https://www.github.com/">GitHub Pages</a></li>
        <li>
          <a href="/feed.rss" rel="alternate">
            RSS feed <i class="fal fa-rss-square"> </i></a>
        </li>
      </ul>
    </footer>
  </body>
</html>